{
  "base.html": "<!doctype html>\n    <html lang=\"en\">\n    <head>\n        <title>Healthcare Systems</title>\n        <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n        <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.13/flatpickr.min.css\">\n\n        <!-- FullCalendar CSS -->\n        <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css' rel='stylesheet' />\n\n        <!-- FullCalendar JS -->\n        <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js'></script>\n        <style>\n            body {\n                background-color: #f8f9fa;\n            }\n\n            .form-control, .form-select {\n                border-radius: 8px;\n                border: 1px solid #ced4da;\n                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n                padding: 10px;\n                transition: all 0.3s ease;\n            }\n\n            .form-control:focus, .form-select:focus {\n                border-color: #004080;\n                box-shadow: 0 0 0 0.2rem rgba(0, 64, 128, 0.25);\n            }\n\n            label {\n                font-weight: 600;\n                color: #333;\n            }\n\n            .btn {\n                padding: 10px 15px;\n                border-radius: 6px;\n            }\n\n            .form-check-input {\n                transform: scale(1.2);\n                margin-right: 8px;\n            }\n\n            .form-check-label {\n                font-weight: normal;\n            }\n\n            .border {\n                border: 1px solid #dee2e6 !important;\n            }\n\n            h4 {\n                margin-top: 20px;\n                padding-bottom: 8px;\n                border-bottom: 2px solid #004080;\n                margin-bottom: 15px;\n            }\n        </style>\n    </head>\n    <body class=\"bg-light\">\n        <nav class=\"navbar navbar-expand-lg navbar-dark bg-primary shadow\">\n            <div class=\"container\">\n                <a class=\"navbar-brand d-flex align-items-center\" href=\"{{ url_for('dashboard') }}\">\n                    <img src=\"{{ url_for('custom_static', filename='secondimagebeca2.png') }}\" \n                        alt=\"Logo\" \n                        style=\"height: 100px !important; width: auto !important;\">\n\n                    Healthcare Systems\n                </a>\n                <div class=\"navbar-nav ms-auto\">\n                    {% if current_user.is_authenticated %}\n                        {% set unread_count = current_user.received_messages|selectattr('read', 'equalto', False)|list|length %}\n                        {% if current_user.role == 'doctor' %}\n                            <a class=\"nav-link text-white\" href=\"{{ url_for('doctor_dashboard') }}\">Dashboard</a>\n                            <a class=\"nav-link text-white\" href=\"{{ url_for('doctor_edit_profile') }}\">Edit Profile</a>\n                            <a class=\"nav-link text-white\" href=\"{{ url_for('doctor_jobs') }}\">Jobs</a>\n                            <a class=\"nav-link text-white position-relative\" href=\"{{ url_for('doctor_inbox') }}\">\n                                Inbox\n                                {% if unread_count > 0 %}\n                                <span class=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger\">\n                                    {{ unread_count }}\n                                </span>\n                                {% endif %}\n                            </a>\n                            <a class=\"nav-link text-white\" href=\"{{ url_for('logout') }}\">Logout</a>\n\n                        {% elif current_user.role == 'admin' %}\n                            <a class=\"nav-link text-white\" href=\"{{ url_for('register_doctor') }}\">Create Doctor Login</a>\n                            <a class=\"nav-link text-white\" href=\"{{ url_for('register_client') }}\">Create Client Login</a>\n                            <a class=\"nav-link text-white\" href=\"{{ url_for('add_doctor') }}\">Add Doctor</a>\n                            <a class=\"nav-link text-white\" href=\"{{ url_for('doctors') }}\">View Doctors</a>\n                            <a class=\"nav-link text-white\" href=\"{{ url_for('post_job') }}\">Post Job</a>\n                            <a class=\"nav-link text-white position-relative\" href=\"{{ url_for('admin_inbox') }}\">\n                                Inbox\n                                {% if unread_count > 0 %}\n                                <span class=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger\">\n                                    {{ unread_count }}\n                                </span>\n                                {% endif %}\n                            </a>\n                            <a class=\"nav-link text-white\" href=\"{{ url_for('logout') }}\">Logout</a>\n\n                        {% elif current_user.role == 'client' %}\n                            <a class=\"nav-link text-white\" href=\"{{ url_for('post_job') }}\">Post Job</a>\n                            <a class=\"nav-link text-white\" href=\"{{ url_for('client_my_jobs') }}\">My Jobs</a>\n                            <a class=\"nav-link text-white\" href=\"{{ url_for('schedule_call') }}\">Schedule Call</a>\n                            <a class=\"nav-link text-white\" href=\"{{ url_for('calls') }}\">Scheduled Calls</a>\n                            <a class=\"nav-link text-white\" href=\"{{ url_for('doctors') }}\">View Doctors</a>\n                            <a class=\"nav-link text-white position-relative\" href=\"{{ url_for('client_inbox') }}\">\n                                Inbox\n                                {% if unread_count > 0 %}\n                                <span class=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger\">\n                                    {{ unread_count }}\n                                </span>\n                                {% endif %}\n                            </a>\n                            <a class=\"nav-link text-white\" href=\"{{ url_for('logout') }}\">Logout</a>\n\n                        {% else %}\n                            <a class=\"nav-link text-white\" href=\"{{ url_for('logout') }}\">Logout</a>\n                        {% endif %}\n                    {% else %}\n                        <a class=\"nav-link text-white\" href=\"{{ url_for('login') }}\">Login</a>\n                    {% endif %}\n                </div>\n\n\n\n            </div>\n        </nav>\n        <div class=\"container py-4\">\n            {% with messages = get_flashed_messages(with_categories=true) %}\n                {% for category, msg in messages %}\n                    <div class=\"alert alert-{{ category }}\">{{ msg }}</div>\n                {% endfor %}\n            {% endwith %}\n            {% block content %}{% endblock %}\n        </div>\n        <script src=\"https://cdn.jsdelivr.net/npm/flatpickr\"></script>\n        <script>\n            flatpickr(\"#datetime\", {enableTime: true, dateFormat: \"Y-m-d\\\\TH:i\"});\n        </script>\n    </body>\n    </html>",
  "index.html": "{% extends \"base.html\" %}{% block content %}\n        <h1>Beca Staffing CRM Dashboard</h1>\n        <a class=\"btn btn-success\" href=\"/add_doctor\">Add Doctor</a>\n        <a class=\"btn btn-info\" href=\"/schedule_call\">Schedule Call with Doctor</a>\n        <a class=\"btn btn-primary\" href=\"/calls\">View Scheduled Calls</a>\n        <a class=\"btn btn-secondary\" href=\"/doctors\">View Doctors</a>\n    {% endblock %}",
  "login.html": "{% extends \"base.html\" %}\n    {% block content %}\n        <h2>Login</h2>\n        <form method=\"post\">\n            {{ form.hidden_tag() }}\n            <div class=\"mb-3\">\n                {{ form.username.label }} {{ form.username(class=\"form-control\") }}\n            </div>\n            <div class=\"mb-3\">\n                {{ form.password.label }} {{ form.password(class=\"form-control\", type=\"password\") }}\n            </div>\n            {{ form.submit(class=\"btn btn-primary\") }}\n        </form>\n        {% endblock %}",
  "client_dashboard.html": "{% extends 'base.html' %}\n\n        {% block content %}\n        <h2>Client Dashboard</h2>\n\n        <div class=\"mb-3\">\n            <a class=\"btn btn-success\" href=\"{{ url_for('schedule_call') }}\">Schedule Call</a>\n            <a class=\"btn btn-primary\" href=\"{{ url_for('calls') }}\">Scheduled Calls</a>\n            <a class=\"btn btn-secondary\" href=\"{{ url_for('doctors') }}\">View Doctors</a>\n            <a class=\"btn btn-info\" href=\"{{ url_for('client_inbox') }}\">Inbox</a>\n            <a class=\"btn btn-warning\" href=\"{{ url_for('post_job') }}\">Post Job</a>\n            <a class=\"btn btn-dark\" href=\"{{ url_for('client_my_jobs') }}\">My Jobs</a>\n        </div>\n\n        <div id='calendar'></div>\n\n        <div class=\"mt-4\">\n            <h3>Reschedule Requests</h3>\n            {% if reschedule_requests %}\n                <ul class=\"list-group\">\n                {% for request in reschedule_requests %}\n                    <li class=\"list-group-item\">\n                        Doctor: Dr. {{ request.doctor.first_name }} {{ request.doctor.last_name }}<br>\n                        Original: {{ request.datetime.strftime('%Y-%m-%d %H:%M') }}<br>\n                        Requested: {{ request.reschedule_datetime.strftime('%Y-%m-%d %H:%M') }}<br>\n                        Reason: {{ request.reschedule_note }}<br>\n\n                        <form action=\"{{ url_for('client_handle_reschedule', call_id=request.id) }}\" method=\"post\">\n                            <textarea name=\"client_note\" class=\"form-control mt-2\" placeholder=\"Optional note\"></textarea>\n                            <button type=\"submit\" name=\"action\" value=\"accept\" class=\"btn btn-success mt-2\">Accept</button>\n                            <button type=\"submit\" name=\"action\" value=\"decline\" class=\"btn btn-danger mt-2\">Decline</button>\n                        </form>\n                    </li>\n                {% endfor %}\n                </ul>\n            {% else %}\n                <p>No reschedule requests at this time.</p>\n            {% endif %}\n        </div>\n\n        <script>\n        document.addEventListener('DOMContentLoaded', function() {\n            var calendarEl = document.getElementById('calendar');\n            var calendar = new FullCalendar.Calendar(calendarEl, {\n                initialView: 'dayGridMonth',\n                headerToolbar: {\n                    left: 'prev,next today',\n                    center: 'title',\n                    right: 'dayGridMonth,timeGridWeek,timeGridDay'\n                },\n                height: 650,\n                events: {{ events | tojson }},\n                eventDidMount: function(info) {\n                    // Tooltip to show event status on hover\n                    let tooltip = new bootstrap.Tooltip(info.el, {\n                        title: info.event.extendedProps.status,\n                        placement: 'top',\n                        trigger: 'hover',\n                        container: 'body'\n                    });\n\n                    // Strikethrough canceled events\n                    if (info.event.extendedProps.status === 'Canceled') {\n                        info.el.style.textDecoration = 'line-through';\n                    }\n                },\n                eventClick: function(info) {\n                    window.location.href = \"/edit_call/\" + info.event.id;\n                }\n            });\n            calendar.render();\n        });\n        </script>\n\n        <!-- Include Bootstrap Tooltip -->\n        <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\n\n        {% endblock %}",
  "register_doctor.html": "{% extends \"base.html\" %}\n    {% block content %}\n        <h2>Create Doctor Account</h2>\n        <form method=\"post\">\n            {{ form.hidden_tag() }}\n            {{ form.username.label }} {{ form.username(class=\"form-control\") }}\n            {{ form.email.label }} {{ form.email(class=\"form-control\") }}\n            {{ form.password.label }} {{ form.password(class=\"form-control\") }}\n            {{ form.submit(class=\"btn btn-primary mt-3\") }}\n        </form>\n        {% endblock %}",
  "post_job.html": "{% extends \"base.html\" %}\n    {% block content %}\n        <h2>Post a New Job</h2>\n        <form method=\"post\">\n            {{ form.hidden_tag() }}\n            {{ form.title.label }} {{ form.title(class=\"form-control\") }}\n            {{ form.location.label }} {{ form.location(class=\"form-control\") }}\n            {{ form.salary.label }} {{ form.salary(class=\"form-control\") }}\n            {{ form.description.label }} {{ form.description(class=\"form-control\") }}\n            {{ form.submit(class=\"btn btn-success mt-3\") }}\n            <a href=\"{{ url_for('scrape_jobs') }}\" class=\"btn btn-warning mt-3\">Scrape Jobs from DocCafe</a>\n        </form>\n        {% endblock %}",
  "register.html": "{% extends \"base.html\" %}\n    {% block content %}\n        <h2>Register New User</h2>\n        <form method=\"post\">\n            {{ form.hidden_tag() }}\n            <div class=\"mb-3\">\n                {{ form.username.label }} {{ form.username(class=\"form-control\") }}\n            </div>\n            <div class=\"mb-3\">\n                {{ form.password.label }} {{ form.password(class=\"form-control\", type=\"password\") }}\n            </div>\n            {{ form.submit(class=\"btn btn-success\") }}\n        </form>\n        {% endblock %}",
  "add_doctor.html": "{% extends \"base.html\" %}{% block content %}\n        <h2>Add Doctor</h2>\n        <form method=\"post\">\n            {{ form.hidden_tag() }}\n\n            <div class=\"mb-3\">{{ form.position.label }} {{ form.position(class=\"form-select\", id=\"position\") }}</div>\n            <div class=\"mb-3\">{{ form.specialty.label }} {{ form.specialty(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.subspecialty.label }} {{ form.subspecialty(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.first_name.label }} {{ form.first_name(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.last_name.label }} {{ form.last_name(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.email.label }} {{ form.email(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.phone.label }} {{ form.phone(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.alt_phone.label }} {{ form.alt_phone(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.city_of_residence.label }} {{ form.city_of_residence(class=\"form-control\") }}</div>\n\n            <div id=\"md_do_fields\" style=\"display:none;\">\n                <h4>MD/DO Information</h4>\n                <div class=\"mb-3\">{{ form.medical_school.label }} {{ form.medical_school(class=\"form-control\") }}</div>\n                <div class=\"mb-3\">{{ form.med_grad_month_year.label }} {{ form.med_grad_month_year(class=\"form-control\") }}</div>\n                <div class=\"mb-3\">{{ form.residency.label }} {{ form.residency(class=\"form-control\") }}</div>\n                <div class=\"mb-3\">{{ form.residency_grad_month_year.label }} {{ form.residency_grad_month_year(class=\"form-control\") }}</div>\n\n                <div id=\"fellowship_fields\">\n                    {% for fellowship_field in form.fellowship %}\n                        <div class=\"mb-3\">{{ fellowship_field.label }} {{ fellowship_field(class=\"form-control\") }}</div>\n                    {% endfor %}\n                    {% for fellowship_date_field in form.fellowship_grad_month_year %}\n                        <div class=\"mb-3\">{{ fellowship_date_field.label }} {{ fellowship_date_field(class=\"form-control\") }}</div>\n                    {% endfor %}\n                </div>\n            </div>\n\n            <div id=\"np_pa_fields\" style=\"display:none;\">\n                <h4>NP/PA Information</h4>\n                <div class=\"mb-3\">{{ form.bachelors.label }} {{ form.bachelors(class=\"form-control\") }}</div>\n                <div class=\"mb-3\">{{ form.bachelors_grad_month_year.label }} {{ form.bachelors_grad_month_year(class=\"form-control\") }}</div>\n                <div class=\"mb-3\">{{ form.msn.label }} {{ form.msn(class=\"form-control\") }}</div>\n                <div class=\"mb-3\">{{ form.msn_grad_month_year.label }} {{ form.msn_grad_month_year(class=\"form-control\") }}</div>\n                <div class=\"mb-3\">{{ form.dnp.label }} {{ form.dnp(class=\"form-control\") }}</div>\n                <div class=\"mb-3\">{{ form.dnp_grad_month_year.label }} {{ form.dnp_grad_month_year(class=\"form-control\") }}</div>\n                <div class=\"mb-3\">{{ form.additional_training.label }} {{ form.additional_training(class=\"form-control\") }}</div>\n                <div class=\"form-check mb-3\">{{ form.sponsorship_needed(class=\"form-check-input\") }} {{ form.sponsorship_needed.label(class=\"form-check-label\") }}</div>\n            </div>\n\n            <h4>Certification & Additional Information</h4>\n            <div class=\"mb-3\">{{ form.certification.label }} {{ form.certification(class=\"form-select\") }}</div>\n            <div class=\"mb-3\">{{ form.emr.label }} {{ form.emr(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.languages.label }} {{ form.languages(class=\"form-control\") }}</div>\n\n            <h4>Malpractice Cases</h4>\n            <div id=\"malpractice_fields\">\n                {% for case in form.malpractice_cases %}\n                    <div class=\"border p-3 mb-3 rounded\">\n                        <div class=\"mb-2\">{{ case.incident_year.label }} {{ case.incident_year(class=\"form-control\") }}</div>\n                        <div class=\"mb-2\">{{ case.outcome.label }} {{ case.outcome(class=\"form-select\") }}</div>\n                        <div class=\"mb-2\">{{ case.payout_amount.label }} {{ case.payout_amount(class=\"form-control\") }}</div>\n                    </div>\n                {% endfor %}\n            </div>\n\n            <div class=\"mb-3\">\n                <label>{{ form.states_licensed.label }}</label>\n                {% for state in form.states_licensed %}\n                    <div class=\"form-check\">{{ state }} {{ state.label }}</div>\n                {% endfor %}\n            </div>\n\n            <div class=\"mb-3\">\n                <label>{{ form.states_willing_to_work.label }}</label>\n                {% for state in form.states_willing_to_work %}\n                    <div class=\"form-check\">{{ state }} {{ state.label }}</div>\n                {% endfor %}\n            </div>\n\n            <div class=\"mb-3\">{{ form.salary_expectations.label }} {{ form.salary_expectations(class=\"form-control\") }}</div>\n\n            {{ form.submit(class=\"btn btn-primary\") }}\n        </form>\n\n        <script>\n            document.addEventListener('DOMContentLoaded', () => {\n                const positionField = document.getElementById('position');\n                const md_do_fields = document.getElementById('md_do_fields');\n                const np_pa_fields = document.getElementById('np_pa_fields');\n\n                function toggleFields() {\n                    const val = positionField.value;\n                    md_do_fields.style.display = ['MD', 'DO'].includes(val) ? 'block' : 'none';\n                    np_pa_fields.style.display = ['NP', 'PA'].includes(val) ? 'block' : 'none';\n                }\n\n                positionField.addEventListener('change', toggleFields);\n                toggleFields();  \n            });\n        </script>\n    {% endblock %}",
  "client_my_jobs.html": "{% extends \"base.html\" %}\n    {% block content %}\n        <h2>My Job Postings</h2>\n        {% if jobs %}\n            <table class=\"table table-striped\">\n                <thead>\n                    <tr>\n                        <th>Title</th>\n                        <th>Location</th>\n                        <th>Salary</th>\n                        <th>Edit</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {% for job in jobs %}\n                    <tr>\n                        <td>{{ job.title }}</td>\n                        <td>{{ job.location }}</td>\n                        <td>{{ job.salary }}</td>\n                        <td>\n                            <a href=\"{{ url_for('edit_job', job_id=job.id) }}\" class=\"btn btn-warning btn-sm\">Edit</a>\n                        </td>\n                    </tr>\n                    {% endfor %}\n                </tbody>\n            </table>\n        {% else %}\n            <p>You haven't posted any jobs yet.</p>\n        {% endif %}\n    {% endblock %}",
  "schedule_call.html": "{% extends \"base.html\" %}\n        {% block content %}\n            <h2>Schedule Call with Doctor</h2>\n            <form method=\"post\">\n                {{ form.hidden_tag() }}\n\n                <div class=\"mb-3\">\n                    {{ form.doctor_id.label }}\n                    {{ form.doctor_id(class=\"form-select\") }}\n                </div>\n\n                <div class=\"mb-3\">\n                    {{ form.datetime.label }}\n                    {{ form.datetime(class=\"form-control\", id=\"datetime\") }}\n                </div>\n\n                <div class=\"mb-3\">\n                    {{ form.reason.label }}\n                    {{ form.reason(class=\"form-control\") }}\n                </div>\n\n                {{ form.submit(class=\"btn btn-primary\") }}\n\n                <div class=\"mt-3\">\n                    <button name=\"send_invite\" value=\"yes\" class=\"btn btn-info\">Send Invite to Doctor</button>\n                </div>\n            </form>\n\n\n            <!-- Include Select2 CSS and JS -->\n            <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\n            <script src=\"https://code.jquery.com/jquery-3.6.0.min.js\"></script>\n            <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\n\n            <script>\n                $(document).ready(function() {\n                    $('.form-select').select2({\n                        placeholder: \"Select Doctor (Name | Email | Specialty)\",\n                        allowClear: true,\n                        width: '100%'\n                    });\n                });\n            </script>\n        {% endblock %}",
  "doctor_profile.html": "{% extends \"base.html\" %}{% block content %}\n        <h2>Doctor Profile: {{ doctor.first_name }} {{ doctor.last_name }}</h2>\n        <div class=\"card shadow p-4 mb-4\">\n            <h5 class=\"card-title text-primary\">Basic Information</h5>\n            <p><strong>Position:</strong> {{ doctor.position }}</p>\n            <p><strong>Specialty:</strong> {{ doctor.specialty }}</p>\n            <p><strong>Subspecialty:</strong> {{ doctor.subspecialty }}</p>\n            <p><strong>Email:</strong> {{ doctor.email }}</p>\n            <p><strong>Phone:</strong> {{ doctor.phone }}</p>\n            <p><strong>Alternative Phone:</strong> {{ doctor.alt_phone }}</p>\n            <p><strong>City of Residence:</strong> {{ doctor.city_of_residence }}</p>\n        </div>\n\n        {% if doctor.medical_school %}\n        <div class=\"card shadow p-4 mb-4\">\n            <h5 class=\"card-title text-primary\">MD/DO Education</h5>\n            <p><strong>Medical School:</strong> {{ doctor.medical_school }}</p>\n            <p><strong>Graduation:</strong> {{ doctor.med_grad_month_year }}</p>\n            <p><strong>Residency:</strong> {{ doctor.residency }}</p>\n            <p><strong>Residency Graduation:</strong> {{ doctor.residency_grad_month_year }}</p>\n            <p><strong>Fellowships:</strong> {{ doctor.fellowship }}</p>\n            <p><strong>Fellowship Graduation:</strong> {{ doctor.fellowship_grad_month_year }}</p>\n        </div>\n        {% endif %}\n\n        {% if doctor.bachelors %}\n        <div class=\"card shadow p-4 mb-4\">\n            <h5 class=\"card-title text-primary\">NP/PA Education</h5>\n            <p><strong>Bachelors Degree:</strong> {{ doctor.bachelors }}</p>\n            <p><strong>Bachelors Graduation:</strong> {{ doctor.bachelors_grad_month_year }}</p>\n            <p><strong>MSN:</strong> {{ doctor.msn }}</p>\n            <p><strong>MSN Graduation:</strong> {{ doctor.msn_grad_month_year }}</p>\n            <p><strong>DNP:</strong> {{ doctor.dnp }}</p>\n            <p><strong>DNP Graduation:</strong> {{ doctor.dnp_grad_month_year }}</p>\n            <p><strong>Additional Training:</strong> {{ doctor.additional_training }}</p>\n            <p><strong>Sponsorship Needed:</strong> {{ 'Yes' if doctor.sponsorship_needed else 'No' }}</p>\n        </div>\n        {% endif %}\n\n        <div class=\"card shadow p-4 mb-4\">\n            <h5 class=\"card-title text-primary\">Licensing & Work Preferences</h5>\n            <p><strong>Certification:</strong> {{ doctor.certification }}</p>\n            <p><strong>EMR:</strong> {{ doctor.emr }}</p>\n            <p><strong>Languages:</strong> {{ doctor.languages }}</p>\n            <p><strong>States Licensed:</strong> {{ doctor.states_licensed }}</p>\n            <p><strong>States Willing to Work:</strong> {{ doctor.states_willing_to_work }}</p>\n            <p><strong>Salary Expectations:</strong> ${{ doctor.salary_expectations }}</p>\n        </div>\n\n        <div class=\"card shadow p-4 mb-4\">\n            <h5 class=\"card-title text-primary\">Malpractice Cases</h5>\n            {% if malpractice_cases %}\n                {% for case in malpractice_cases %}\n                    <p><strong>Incident Year:</strong> {{ case.incident_year }}</p>\n                    <p><strong>Outcome:</strong> {{ case.outcome }}</p>\n                    <p><strong>Payout Amount:</strong> ${{ case.payout_amount }}</p>\n                    <hr>\n                {% endfor %}\n            {% else %}\n                <p>No malpractice cases reported.</p>\n            {% endif %}\n        </div>\n\n        <a href=\"{{ url_for('edit_doctor', doctor_id=doctor.id) }}\" class=\"btn btn-warning\">Edit Profile</a>\n        <a href=\"{{ url_for('send_job_to_doctor', doctor_id=doctor.id) }}\" class=\"btn btn-info\">Send Job Posting</a>\n        <a href=\"{{ url_for('doctors') }}\" class=\"btn btn-secondary\">Back to Doctors List</a>\n    {% endblock %}",
  "register_client.html": "{% extends \"base.html\" %}\n        {% block content %}\n            <h2>Create Client Account</h2>\n            <form method=\"post\">\n                {{ form.hidden_tag() }}\n                <div class=\"mb-3\">\n                    {{ form.username.label }} {{ form.username(class=\"form-control\") }}\n                </div>\n                <div class=\"mb-3\">\n                    {{ form.email.label }} {{ form.email(class=\"form-control\") }}\n                </div>\n                <div class=\"mb-3\">\n                    {{ form.password.label }} {{ form.password(class=\"form-control\") }}\n                </div>\n                {{ form.submit(class=\"btn btn-primary\") }}\n            </form>\n        {% endblock %}",
  "calls.html": "{% extends \"base.html\" %}\n        {% block content %}\n            <h2>Scheduled Calls with Doctors</h2>\n\n            <div id='calendar'></div>\n\n            <script>\n                document.addEventListener('DOMContentLoaded', function() {\n                    var calendarEl = document.getElementById('calendar');\n\n                    var calendar = new FullCalendar.Calendar(calendarEl, {\n                        initialView: 'dayGridMonth',\n                        headerToolbar: {\n                            left: 'prev,next today',\n                            center: 'title',\n                            right: 'dayGridMonth,timeGridWeek,timeGridDay'\n                        },\n                        height: 650,\n                        events: {{ events | tojson }},\n                        \n                        // Add this block to handle event clicks:\n                        eventClick: function(info) {\n                            window.location.href = \"/edit_call/\" + info.event.id;\n                        }\n                    });\n\n                    calendar.render();\n                });\n            </script>\n        {% endblock %}",
  "doctor_dashboard.html": "{% extends \"base.html\" %}\n        {% block content %}\n        <h2>Welcome Dr. {{ doctor.first_name }} {{ doctor.last_name }}</h2>\n\n        <div class=\"mb-3\">\n            <a class=\"btn btn-info\" href=\"{{ url_for('doctor_edit_profile') }}\">Edit Profile</a>\n            <a class=\"btn btn-secondary\" href=\"{{ url_for('doctor_jobs') }}\">Jobs</a>\n            <a class=\"btn btn-success\" href=\"{{ url_for('doctor_inbox') }}\">Inbox</a>\n            <a class=\"btn btn-danger\" href=\"{{ url_for('logout') }}\">Logout</a>\n        </div>\n\n        <h4>Pending Invites</h4>\n        {% for call in pending_invites %}\n        <div class=\"alert alert-info\">\n            Invite from {{ call.scheduled_by.username }} on {{ call.datetime.strftime('%Y-%m-%d %H:%M') }} for \"{{ call.reason }}\"\n            <br>\n            <strong>Job:</strong> \n            <a href=\"{{ url_for('doctor_jobs') }}#job-{{ call.job.id }}\">\n                {{ call.job.title }}\n            </a>\n            <form method=\"post\" action=\"{{ url_for('handle_invite', call_id=call.id) }}\">\n                <button name=\"action\" value=\"accept\" class=\"btn btn-success btn-sm\">Accept</button>\n                <button name=\"action\" value=\"decline\" class=\"btn btn-danger btn-sm\">Decline</button>\n            </form>\n        </div>\n        {% else %}\n        <p>No pending invites.</p>\n        {% endfor %}\n\n        <div id=\"calendar\"></div>\n\n        <script>\n        document.addEventListener('DOMContentLoaded', function() {\n            var calendarEl = document.getElementById('calendar');\n            var calendar = new FullCalendar.Calendar(calendarEl, {\n                initialView: 'dayGridMonth',\n                headerToolbar: {\n                    left: 'prev,next today',\n                    center: 'title',\n                    right: 'dayGridMonth,timeGridWeek,timeGridDay'\n                },\n                height: 650,\n                events: {{ events | tojson }},\n                eventDidMount: function(info) {\n                    // Tooltip showing event status clearly\n                    let tooltip = new bootstrap.Tooltip(info.el, {\n                        title: info.event.extendedProps.status,\n                        placement: 'top',\n                        trigger: 'hover',\n                        container: 'body'\n                    });\n\n                    // Apply strikethrough for canceled meetings\n                    if (info.event.extendedProps.status === 'Canceled') {\n                        info.el.style.textDecoration = 'line-through';\n                    }\n                },\n                eventClick: function(info) {\n                    window.location.href = \"/doctor/call/\" + info.event.id;\n                }\n            });\n            calendar.render();\n        });\n        </script>\n\n        <!-- Include Bootstrap JS for Tooltips (ensure not duplicated) -->\n        <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\n\n        {% endblock %}",
  "edit_job.html": "{% extends \"base.html\" %}\n    {% block content %}\n        <h2>Edit Job: {{ job.title }}</h2>\n        <form method=\"post\">\n            {{ form.hidden_tag() }}\n            <div class=\"mb-3\">\n                {{ form.title.label }} {{ form.title(class=\"form-control\") }}\n            </div>\n            <div class=\"mb-3\">\n                {{ form.location.label }} {{ form.location(class=\"form-control\") }}\n            </div>\n            <div class=\"mb-3\">\n                {{ form.salary.label }} {{ form.salary(class=\"form-control\") }}\n            </div>\n            <div class=\"mb-3\">\n                {{ form.description.label }} {{ form.description(class=\"form-control\") }}\n            </div>\n            {{ form.submit(class=\"btn btn-success\") }}\n        </form>\n    {% endblock %}",
  "doctor_edit_profile.html": "{% extends \"base.html\" %}\n    {% block content %}\n        <h2>Edit My Profile</h2>\n        <form method=\"post\">\n            {{ form.hidden_tag() }}\n\n            <div class=\"mb-3\">{{ form.position.label }} {{ form.position(class=\"form-select\") }}</div>\n            <div class=\"mb-3\">{{ form.specialty.label }} {{ form.specialty(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.subspecialty.label }} {{ form.subspecialty(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.first_name.label }} {{ form.first_name(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.last_name.label }} {{ form.last_name(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.email.label }} {{ form.email(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.phone.label }} {{ form.phone(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.alt_phone.label }} {{ form.alt_phone(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.city_of_residence.label }} {{ form.city_of_residence(class=\"form-control\") }}</div>\n\n            <h4>MD/DO Information</h4>\n            <div class=\"mb-3\">{{ form.medical_school.label }} {{ form.medical_school(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.med_grad_month_year.label }} {{ form.med_grad_month_year(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.residency.label }} {{ form.residency(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.residency_grad_month_year.label }} {{ form.residency_grad_month_year(class=\"form-control\") }}</div>\n\n            <h4>Fellowships</h4>\n            {% for fellowship_field in form.fellowship %}\n                <div class=\"mb-3\">{{ fellowship_field.label }} {{ fellowship_field(class=\"form-control\") }}</div>\n            {% endfor %}\n            {% for fellowship_date_field in form.fellowship_grad_month_year %}\n                <div class=\"mb-3\">{{ fellowship_date_field.label }} {{ fellowship_date_field(class=\"form-control\") }}</div>\n            {% endfor %}\n\n            <h4>NP/PA Information</h4>\n            <div class=\"mb-3\">{{ form.bachelors.label }} {{ form.bachelors(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.bachelors_grad_month_year.label }} {{ form.bachelors_grad_month_year(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.msn.label }} {{ form.msn(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.msn_grad_month_year.label }} {{ form.msn_grad_month_year(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.dnp.label }} {{ form.dnp(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.dnp_grad_month_year.label }} {{ form.dnp_grad_month_year(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.additional_training.label }} {{ form.additional_training(class=\"form-control\") }}</div>\n            <div class=\"form-check mb-3\">{{ form.sponsorship_needed(class=\"form-check-input\") }} {{ form.sponsorship_needed.label(class=\"form-check-label\") }}</div>\n\n            <h4>Certification & More</h4>\n            <div class=\"mb-3\">{{ form.certification.label }} {{ form.certification(class=\"form-select\") }}</div>\n            <div class=\"mb-3\">{{ form.emr.label }} {{ form.emr(class=\"form-control\") }}</div>\n            <div class=\"mb-3\">{{ form.languages.label }} {{ form.languages(class=\"form-control\") }}</div>\n\n            <h4>States Licensed</h4>\n            {% for state in form.states_licensed %}\n                <div class=\"form-check\">{{ state }} {{ state.label }}</div>\n            {% endfor %}\n\n            <h4>States Willing to Work</h4>\n            {% for state in form.states_willing_to_work %}\n                <div class=\"form-check\">{{ state }} {{ state.label }}</div>\n            {% endfor %}\n\n            <h4>Malpractice Cases</h4>\n            {% for case in form.malpractice_cases %}\n                <div class=\"border p-3 mb-3\">\n                    {{ case.incident_year.label }} {{ case.incident_year(class=\"form-control\") }}\n                    {{ case.outcome.label }} {{ case.outcome(class=\"form-select\") }}\n                    {{ case.payout_amount.label }} {{ case.payout_amount(class=\"form-control\") }}\n                </div>\n            {% endfor %}\n\n            <div class=\"mb-3\">{{ form.salary_expectations.label }} {{ form.salary_expectations(class=\"form-control\") }}</div>\n\n            {{ form.submit(class=\"btn btn-success\") }}\n        </form>\n    {% endblock %}",
  "doctor_jobs.html": "{% extends \"base.html\" %}\n        {% block content %}\n        <h2>Available Jobs</h2>\n        <div class=\"list-group\">\n            {% for job in jobs %}\n                <a href=\"{{ url_for('view_job', job_id=job.id) }}\" class=\"list-group-item list-group-item-action\" id=\"job-{{ job.id }}\">\n                    <h4>{{ job.title }}</h4>\n                    <p>{{ job.description }}</p>\n                    <p><strong>Location:</strong> {{ job.location }}</p>\n                    <p><strong>Salary:</strong> {{ job.salary }}</p>\n                </a>\n            {% endfor %}\n        </div>\n        {% endblock %}",
  "view_job.html": "{% extends \"base.html\" %}\n    {% block content %}\n    <div class=\"card\">\n    <div class=\"card-body\">\n        <h3>{{ job.title }}</h3>\n        <p><strong>Location:</strong> {{ job.location }}</p>\n        <p><strong>Salary:</strong> {{ job.salary }}</p>\n        <p>{{ job.description }}</p>\n\n        <form method=\"post\">\n        <button class=\"btn btn-primary\">Express Interest</button>\n        </form>\n\n        <a href=\"{{ url_for('doctor_jobs') }}\" class=\"btn btn-secondary mt-3\">Back to Jobs</a>\n    </div>\n    </div>\n    {% endblock %}",
  "inbox.html": "{% extends 'base.html' %}\n            {% block content %}\n                <h2>{{ title }}</h2>\n                <table class=\"table table-striped\">\n                    <thead>\n                        <tr>\n                            <th>From</th>\n                            <th>Message</th>\n                            <th>Timestamp</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {% for msg in messages %}\n                        <tr>\n                            <td>{{ msg.sender.username }}</td>\n                            <td>\n                                {{ msg.content }}\n                                {% if msg.message_type == 'interest' %}\n                                    <a href=\"{{ url_for('send_invite', doctor_id=msg.doctor_id, job_id=msg.job_id) }}\" class=\"btn btn-primary btn-sm\">Send Call Invite</a>\n                                {% endif %}\n                            </td>\n                            <td>{{ msg.timestamp.strftime('%Y-%m-%d %H:%M') }}</td>\n                        </tr>\n                        {% endfor %}\n                    </tbody>\n                </table>\n            {% endblock %}",
  "doctor_call_details.html": "{% extends \"base.html\" %}\n        {% block content %}\n        <h2>Scheduled Call Details</h2>\n\n        <p><strong>With:</strong> {{ call.scheduled_by.username }} ({{ call.scheduled_by.role }})</p>\n        <p><strong>Date & Time:</strong> {{ call.datetime }}</p>\n        <p><strong>Reason:</strong> {{ call.reason }}</p>\n        <p><strong>Status:</strong> {% if call.canceled %}Canceled{% elif call.reschedule_requested %}Reschedule Requested{% else %}Scheduled{% endif %}</p>\n\n        {% if not call.canceled %}\n        <form method=\"post\">\n            <button name=\"action\" value=\"cancel\" class=\"btn btn-danger\">Cancel Meeting</button>\n        </form>\n\n        <h3 class=\"mt-4\">Request Reschedule</h3>\n        <form method=\"post\">\n            <div class=\"mb-3\">\n                <label>New Date & Time:</label>\n                <input type=\"datetime-local\" name=\"reschedule_datetime\" class=\"form-control\" required>\n            </div>\n            <div class=\"mb-3\">\n                <label>Reason for Reschedule:</label>\n                <textarea name=\"reschedule_note\" class=\"form-control\"></textarea>\n            </div>\n            <button name=\"action\" value=\"reschedule\" class=\"btn btn-warning\">Request Reschedule</button>\n        </form>\n        {% endif %}\n        {% endblock %}",
  "handle_reschedule.html": "{% extends \"base.html\" %}\n        {% block content %}\n        <h2>Handle Reschedule Request</h2>\n\n        <p><strong>Doctor:</strong> {{ call.doctor.first_name }} {{ call.doctor.last_name }}</p>\n        <p><strong>Current Date & Time:</strong> {{ call.datetime }}</p>\n        <p><strong>Requested Date & Time:</strong> {{ call.reschedule_datetime }}</p>\n        <p><strong>Reason for Reschedule:</strong> {{ call.reschedule_note }}</p>\n\n        <form method=\"post\">\n            <button name=\"action\" value=\"accept\" class=\"btn btn-success\">Accept Request</button>\n            <button name=\"action\" value=\"reject\" class=\"btn btn-danger\">Reject Request</button>\n        </form>\n        {% endblock %}",
  "doctors.html": "{% extends \"base.html\" %}{% block content %}\n        <h2>Doctors in System</h2>\n        <table class=\"table table-striped\">\n            <tr>\n                <th>Name</th>\n                <th>Email</th>\n                <th>Phone</th>\n                <th>Specialty</th>\n                <th>States Licensed</th>\n                <th>States Willing to Work</th>\n                <th>Salary Expectations</th>\n                <th>Edit</th>\n            </tr>\n            {% for doctor in doctors %}\n            <tr>\n                <td><a href=\"{{ url_for('doctor_profile', doctor_id=doctor.id) }}\">{{ doctor.first_name }} {{ doctor.last_name }}</a></td>\n                <td>{{ doctor.email }}</td>\n                <td>{{ doctor.phone }}</td>\n                <td>{{ doctor.specialty }}</td>\n                <td>{{ doctor.states_licensed.replace(\",\", \", \") if doctor.states_licensed else '' }}</td>\n                <td>{{ doctor.states_willing_to_work.replace(\",\", \", \") if doctor.states_willing_to_work else '' }}</td>\n                <td>${{ doctor.salary_expectations }}</td>\n                <td>\n                    <a href=\"{{ url_for('edit_doctor', doctor_id=doctor.id) }}\" class=\"btn btn-warning btn-sm\">Edit</a>\n                </td>\n            </tr>\n            {% endfor %}\n        </table>\n    {% endblock %}",
  "edit_call.html": "{% extends \"base.html\" %}\n    {% block content %}\n        <h2>Edit Scheduled Call</h2>\n        <form method=\"post\">\n            {{ form.hidden_tag() }}\n\n            <div class=\"mb-3\">\n                {{ form.doctor_id.label }}\n                {{ form.doctor_id(class=\"form-select\") }}\n            </div>\n\n            <div class=\"mb-3\">\n                {{ form.datetime.label }}\n                {{ form.datetime(class=\"form-control\", id=\"datetime\") }}\n            </div>\n\n            <div class=\"mb-3\">\n                {{ form.reason.label }}\n                {{ form.reason(class=\"form-control\") }}\n            </div>\n\n            {{ form.submit(class=\"btn btn-success\") }}\n        </form>\n\n        <!-- Include Select2 CSS and JS -->\n        <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\n        <script src=\"https://code.jquery.com/jquery-3.6.0.min.js\"></script>\n        <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\n\n        <script>\n            $(document).ready(function() {\n                $('.form-select').select2({\n                    placeholder: \"Select Doctor (Name | Email | Specialty)\",\n                    allowClear: true,\n                    width: '100%'\n                });\n            });\n            flatpickr(\"#datetime\", {enableTime: true, dateFormat: \"Y-m-d\\\\TH:i\"});\n        </script>\n    {% endblock %}",
  "send_job.html": "{% extends 'base.html' %}\n    {% block content %}\n        <h2>Send Job to {{ doctor.first_name }} {{ doctor.last_name }}</h2>\n        <form method=\"post\">\n            <div class=\"mb-3\">\n                <label>Select Job:</label>\n                <select name=\"job_id\" class=\"form-select\">\n                    {% for job in jobs %}\n                        <option value=\"{{ job.id }}\">{{ job.title }} ({{ job.location }})</option>\n                    {% endfor %}\n                </select>\n            </div>\n            <button class=\"btn btn-success\">Send Job</button>\n        </form>\n        {% endblock %}"
}